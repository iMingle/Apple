<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test</title>
</head>
<body>
</body>
</html>

<script>
    function doSomething() {
        let promise = new Promise(function (resolve, reject) {
        });
        let xhr = new XMLHttpRequest();
        xhr.open('GET', 'http://coolshell.cn/', true);

        xhr.onload = function (e) {
            if (this.status === 200) {
                results = JSON.parse(this.responseText);
                promise.resolve(results); // 成功时，调用 resolve() 方法
            }
        };

        xhr.onerror = function (e) {
            promise.reject(e); // 失败时，调用 reject() 方法
        };

        xhr.send();
        return promise;
    }

    doSomething();
</script>
